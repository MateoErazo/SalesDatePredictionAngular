<h2 mat-dialog-title>New Order Form</h2>

<mat-dialog-content>
    <form (submit)="saveChanges()" [formGroup]="form" id="orderForm">
        <div class="GeneralContainer">
            <div class="FormTitle">
                <p>{{data.customerName}} - New Order</p>
            </div>
            <div class="FormContainer">
                <h3>Order</h3>
                <div class="EmployeeShipper">
                    <mat-form-field appearance="fill">
                        <mat-label>Employee</mat-label>
                        <mat-select [formControl]="form.controls.empid">
                            @for (employee of employeesData; track $index) {
                                <mat-option [value]="employee.empid">{{employee.fullName}}</mat-option>
                            }
                        </mat-select>
                        <mat-error>{{getErrorEmployeeField()}}</mat-error>
                    </mat-form-field>
                
                    <mat-form-field appearance="fill">
                        <mat-label>Shipper</mat-label>
                        <mat-select [formControl]="form.controls.shipperid">
                            @for (shipper of shippersData; track $index) {
                                <mat-option [value]="shipper.shipperid">{{shipper.companyname}}</mat-option>
                            }
                        </mat-select>
                        <mat-error>{{getErrorShipperField()}}</mat-error>
                    </mat-form-field>
                </div>
                <div class="ShipName">
                    <mat-form-field appearance="fill">
                        <mat-label>Ship Name</mat-label>
                        <input matInput [formControl]="form.controls.shipname"/>
                        <mat-error>{{getErrorShipNameField()}}</mat-error>
                    </mat-form-field>
                </div>
        
                <div class="ShipAddressCityCountry">
                    <mat-form-field appearance="fill">
                        <mat-label>Ship Address</mat-label>
                        <input matInput [formControl]="form.controls.shipaddress"/>
                        <mat-error>{{getErrorShipAddressField()}}</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Ship City</mat-label>
                        <input matInput [formControl]="form.controls.shipcity"/>
                        <mat-error>{{getErrorShipCityField()}}</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Ship Country</mat-label>
                        <input matInput [formControl]="form.controls.shipcountry"/>
                        <mat-error>{{getErrorShipCountryField()}}</mat-error>
                    </mat-form-field>
                </div>
        
                <div class="DateOrderRequiredShipped">
                    <mat-form-field appearance="fill">
                        <mat-label>Order Date</mat-label>
                        <input matInput [matDatepicker]="orderPicker" [formControl]="form.controls.orderdate"/>
                        <mat-datepicker #orderPicker></mat-datepicker>
                        <mat-datepicker-toggle matPrefix [for]="orderPicker"></mat-datepicker-toggle>
                        <mat-error>{{getErrorOrderDateField()}}</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Required Date</mat-label>
                        <input matInput [matDatepicker]="requiredPicker" [formControl]="form.controls.requireddate"/>
                        <mat-datepicker #requiredPicker></mat-datepicker>
                        <mat-datepicker-toggle matPrefix [for]="requiredPicker"></mat-datepicker-toggle>
                        <mat-error>{{getErrorRequiredDateField()}}</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Shipped Date</mat-label>
                        <input matInput [matDatepicker]="shippedPicker" [formControl]="form.controls.shippeddate"/>
                        <mat-datepicker #shippedPicker></mat-datepicker>
                        <mat-datepicker-toggle matPrefix [for]="shippedPicker"></mat-datepicker-toggle>
                        <mat-error>{{getErrorShippedDateField()}}</mat-error>
                    </mat-form-field>
                </div>
        
                <div class="Freight">
                    <mat-form-field appearance="fill">
                        <mat-label>
                            <mat-icon>attach_money</mat-icon>
                            Freight
                        </mat-label>
                        <input matInput [formControl]="form.controls.freight"/>
                        <mat-error>{{getErrorFreightField()}}</mat-error>
                    </mat-form-field>
                </div>
        
                <hr/>
        
                <h3>Order Details</h3>
        
                <div class="Product">
                    <mat-form-field appearance="fill">
                        <mat-label>Product</mat-label>
                        <mat-select [formControl]="form.controls.productid">
                            @for (product of productsData; track $index) {
                                <mat-option [value]="product.productid">{{product.productname}}</mat-option>
                            }
                        </mat-select>
                        <mat-error>{{getErrorProductField()}}</mat-error>
                    </mat-form-field>
                </div>
        
                <div class="UnitPriceQuantityDiscount">
                    <mat-form-field appearance="fill">
                        <mat-label>
                            <mat-icon>attach_money</mat-icon>
                            Unit Price
                        </mat-label>
                        <input matInput [formControl]="form.controls.unitprice"/>
                        <mat-error>{{getErrorUnitPriceField()}}</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Quantity</mat-label>
                        <input matInput [formControl]="form.controls.qty"/>
                        <mat-error>{{getErrorQuantityField()}}</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="fill">
                        <mat-label>Discount</mat-label>
                        <input matInput [formControl]="form.controls.discount"/>
                        <mat-error>{{getErrorDiscountField()}}</mat-error>
                    </mat-form-field>
                </div>
            </div>
        </div>
    </form>
</mat-dialog-content>
<mat-dialog-actions>
    <a mat-button type="button" (click)="onNoClick()" style="color: green;">CLOSE</a>
    <button mat-button form="orderForm" type="submit" [disabled]="form.invalid" style="color: green;">SAVE</button>
</mat-dialog-actions>